<script>
	var registerService = new RegisterService();
	var httpAjaxService = new HttpAjaxServices();

	function showAggrementPage(data) {
		$("#aggrementModel").modal('show');
	}

	function enableRegister() {
		$("#updateServiceButton").hide();
		$("#submitButton").show();
		cleanUp();
		$("input:radio").attr("checked", false);
		$("#directEmail").removeAttr("disabled");
	}
	
	function cleanUp()
	{
		$('#registrationModal').modal('show');
		$(".date-picker").datepicker({
			dateFormat : 'yy-mm-dd'
		});
		document.getElementById("registerForm").reset();
		$('#registerDiv').show();
		$('#updateSystemAlertID').hide();
		$('#DirectSystemRegAlertID').hide();
		$('#directEmailExistAlertID').hide();
		$('#registerForm').validationEngine('hideAll');
		$('#registerForm .formError').hide(0);
	}
	

	$(document).ready(function() {
						$('.alert .close').click(function() {
				  			   $(this).closest('.alert').hide();
				  		});
						if (MODEL.userLoggedIn == 1) {
							$('#vendorReg').show();
							$('#directSysPanleId').show();
							registerService.readUserDirectSystems();
						} else {
							$('#vendorReg').hide();
							$('#registrationModal').modal('hide');
							$('#directSysPanleId').hide();
						}
						$("#submitButton").click(function(e) {
							var jform = $('#registerForm');
							//jform.validationEngine({promptPosition:"centerRight", validateNonVisibleFields: true, updatePromptsPosition:true});
							if (jform.validationEngine('validate')) {
								registerService.registerService();
							} else {
								$('#registerForm .formError').show(0);
							}
						});
						$("#updateServiceButton").click(function(e) {
							var jform = $('#registerForm');
							//jform.validationEngine({promptPosition:"centerRight", validateNonVisibleFields: true, updatePromptsPosition:true});
							if (jform.validationEngine('validate')) {
								registerService.updateService();
							} else {
								$('#registerForm .formError').show(0);
							}
						});
					});
</script>



<div class="container" style="padding-top: 30px;">
	<div class="jumbotron">
		<h1 style="text-align: center;"><b>Developer Registration</b></h1>
		<hr>
	
	
		
	</div>
	<div>
			<p>Welcome to the Developer Registration page. This page offers health IT developers the ability to register their Direct services so that implementers (providers, hospitals, etc.) can find them and use them for interoperability testing. To see which health IT developer systems are available for interoperability testing, please click on the Direct Services tab. Developers that would like to share their Direct system should first create an account using the Sign Up link and then login to register their Direct service.</p>
			<p>NOTE: Implementers DO NOT need to register or login to test their Direct implementations.</p>
			<p>For any issues or questions related to health IT developer registration please contact <a href="mailto:xvendor.exchange@hhs.gov">xvendor.exchange@hhs.gov</a></span></p>
		</div>
	<div id="vendorReg" hidden="true" class="text-center">
		<br/>
		<a href="#" onclick="showAggrementPage()" id="regLinkId" class="btn btn-primary">Register Your Direct Service</a>
		<br/>
				
		<br/>
	</div>
	<div class="alert alert-success alert-dismissible" role="alert"
				id="DirectSystemRegAlertID" style="padding: 11px;" hidden="true" style="margin-bottom:30px;">
				<button type="button" class="close"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				Direct System has been successfully registered.
	</div>
	
	<div class="alert alert-success alert-dismissible" role="alert"
				id="updateSystemAlertID" style="padding: 11px;" hidden="true" style="margin-bottom:30px;">
				<button type="button" class="close"
					aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
				Direct System has been updated successfully.
	</div>
	
	
	
	
	
	<div id="directSysPanleId" class="panel panel-default" hidden="true">
		<div class="panel-heading">
			<h2 class="panel-title">Registered Direct Services</h2>
		</div>

		<div class="panel-body">
		     <table class="table table-striped">
				<thead>
					<tr>
						<th class="col-sm-2">Certified EHR Technology</th>
						<th class="col-sm-2">Organization</th>
						<th class="col-sm-2">Direct Endpoint</th>
						<th class="col-sm-2">Point of Contact</th>
						<th class="col-sm-2">Availability Dates</th>
						<th class="col-sm-2">Direct Trust Member</th>
						<th class="col-sm-2">Trust Anchor</th>
					</tr>
				</thead>
				<tbody id=userDirectSysTableBody>
				</tbody>
			</table>
		
		</div>
   </div>
	
</div>




<div id="aggrementModel" class="modal fade" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h2 class="modal-title">Agreement</h2>
			</div>
			<div class="modal-body">
				<p>As a Participant of ONC SITE Direct Transport Standard Testing Services, Parties involved in DIRECT Testing shall not reveal Confidential Information, and no information shared during the process of testing shall be considered confidential. Parties shall use test data only. Parties shall not use live or real data that is actual data about living, identifiable individuals. Parties shall adhere to all Federal Regulations including, but not limited to the Health Insurance Portability and Accountability Act of 1996 (HIPAA).</p>
			</div>
			<div class="modal-footer" style="margin-top: 0px;">
				<button type="button" class="btn btn-primary" data-dismiss="modal"
					onclick="enableRegister()">Accept</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<div id="registrationModal" class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h2 class="modal-title">Direct System Registration</h2>
			</div>
			<div class="modal-body">
				
							<div>
								<h4 style="text-align: center">* All fields are required</h4>
							</div>
							<div id="registerDiv" style="padding-top: 20px;" hidden="true">
							
								<form id="registerForm" class="form-horizontal">
									<div class="form-group">
										<label class="col-lg-5 control-label" for="cehrtLabel">Certified EHR Technology </label>
										<div class="col-lg-7">
											<input type="text"
												class="form-control validate[required,maxSize[30]]"
												name="cehrtLabel" id="cehrtLabel" />
										</div>
									</div>
									
				
									<div class="form-group">
										<label class="col-lg-5 control-label" for="orgName">Organization Name </label>
										<div class="col-lg-7">
											<input type="text"
												class="form-control validate[required,maxSize[30]]"
												name="orgName" id="orgName" />
										</div>
									</div>
				
									<div class="form-group">
										<label class="col-lg-5 control-label" for="directEmail">Direct Email Address</label>
										<div class="col-lg-7">
											<input type="text"
												class="form-control validate[required,custom[email]]"
												name="directEmail" id="directEmail" />
										</div>
									</div>
				
									<div class="form-group">
										<label class="col-lg-5 control-label" for="pocEmail">Point of Contact
											Email (This will be used by implementers to contact if there are questions on the Direct System)</label>
										<div class="col-lg-7">
											<input type="text"
												class="form-control validate[required,custom[email],custom[notEqual]]"
												name="pocEmail" id="pocEmail" />
										</div>
									</div>
				
									<div class="form-group">
										<label class="col-lg-5 control-label" for="pocFirstName">Point of Contact
											First Name</label>
										<div class="col-lg-7">
											<input type="text"
												class="form-control validate[required,maxSize[30]]"
												name="pocFirstName" id="pocFirstName" />
										</div>
									</div>
				
									<div class="form-group">
										<label class="col-lg-5 control-label" for="pocLastName">Point of Contact
											Last Name</label>
										<div class="col-lg-7">
											<input type="text"
												class="form-control validate[required,maxSize[30]]"
												name="pocLastName" id="pocLastName" />
										</div>
									</div>
				
									<div class="form-group">
										<label class="col-lg-5 control-label" for="timezone">Timezone</label>
										<div class="col-lg-7">
											<select name="timezone" class="form-control validate[required]"
												id="timezone" data-toggle="tooltip" data-placement="right"
												data-original-title="This is the timezone which indicates availability of the POC from 9am to 5pm"
												required data-fv-notempty-message="Timezone is required">
												<option value="">Please select timezone</option>
												<option value="EST">EASTERN TIME</option>
												<option value="CST">CENTRAL TIME</option>
												<option value="MST">MOUNTAIN TIME</option>
												<option value="PST">PACIFIC TIME</option>
												<option value="AKST">ALASKA TIME</option>
												<option value="HST">HAWAII TIME</option>
											</select>
										</div>
									</div>
				
				
				
									<div class="form-group">
									
										<fieldset>
										<legend class="col-lg-5 control-label" style="font-size: inherit; border-bottom: none; font-weight:bold;">Direct Trust
											Membership</legend>
										<div class="col-lg-7">
											<div class="radio">
												<label for="option_yes">
												<input type="radio" name="optradio" id="option_yes" value="Yes" class="validate[required]">Yes</label>
											</div>
											<div class="radio">
												<label for="option_no"><input type="radio" name="optradio" id="option_no" class="validate[required]" value="No">No</label>
											</div>
										</div>
										</fieldset>
									</div>
				
									<div class="form-group">
										<div class="col-lg-5 control-label" style="font-weight:bold;">Availability
											(Availability indicates the dates during which system is
											available for interoperability testing during weekdays).</div>
										<div class="col-lg-7">
											<div class="control-group">
												<label class="control-label" for="availFromDate" >Available From (YYYY-MM-DD)</label>
												<div class="controls">
														<input type="text"
															class="date-picker form-control validate[required,custom[date],future[NOW],dateRange[grp1]]"
															id="availFromDate" name="availFromDate" style="position: relative; z-index: 1100;" /> 
												</div>
											</div>
				
											<div class="control-group">
												<label class="control-label" for="availToDate">Available To (YYYY-MM-DD)</label>
												<div class="controls">
														<input type="text"
															class="date-picker form-control validate[required,custom[date],future[NOW],dateRange[grp1]]"
															id="availToDate" name="availToDate" style="position: relative; z-index: 1100;"/> 
												</div>
											</div>
										</div>
									</div>
				
									<div class="form-group">
										<div class="text-center">
											<button type="submit" id="submitButton" class="btn btn-success"
												onclick="return false;">Register Service</button>
											<button type="submit" id="updateServiceButton" class="btn btn-success"
												onclick="return false;" hidden="true">Update Service</button>	
										</div>
									</div>
								</form>
								
								
							</div>
							
							<div class="alert alert-danger alert-dismissible" role="alert"
								id="directEmailExistAlertID" style="padding: 11px;" hidden="true">
								<button type="button" class="close"
									aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
								The direct email address has already been registered.
							</div>
					</div>
			<div class="modal-footer" style="margin-top: 0px;">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>


<div id="uploadModel" class="modal fade" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h2 class="modal-title">Trust Anchors</h2>
			</div>
			<div class="modal-body">
			
			<div id="certUploadId">
					<form id="anchoruploadform" method="POST"
						enctype="multipart/form-data">
						<div id="anchoruploaderrorlock" style="position: relative;">
								<label for="anchoruploadfile">Select one or more Trust Anchor Certificates required to interoperate with the Direct System </label><br/><span
									class="btn btn-success fileinput-button"
									id="anchoruploadfile-btn"> <i
									class="glyphicon glyphicon-plus"></i>&nbsp;<span>Select a Certificate...</span> <input id="anchoruploadfile" type="file"
										name="anchoruploadfile"
										class="validate[required, custom[derencncodedfileextension[der|crt|cer|pem|DER|CRT|CER|PEM]], custom[maxCertFileSize]]" />
									</span>
									<button id="anchoruploadsubmit" type="submit"
										class="btn btn-primary primary" onclick="return false;">
										<i class="glyphicon glyphicon-ok"></i> <span>Submit
											Anchor</span>
									</button>
									<div id="anchoruploadfiles" class="files"></div>
									<p id="progressText"></p>
								</div>
						<br>
					</form>
					<table class="table table-striped">
					<thead>
						<tr>
							<th class="col-sm-2">CERT File Name</th>
							<th class="col-sm-2">Uploaded Date</th>
							<th class="col-sm-1">Delete</th>
						</tr>
					</thead>
					<tbody id=certAnchorsTableBodyId>
					</tbody>
				</table>
			</div> 
			</div>
			<div class="modal-footer" style="margin-top: 0px;">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<div id="DeleteConfirm" class="modal fade" tabindex="-1">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"
					aria-hidden="true">&times;</button>
				<h4 class="modal-title">Deleting Trust Anchor certificate</h4>
			</div>
			<div class="modal-body">
				<h5>Are you sure you want to delete Trust Anchor Certificate ?</h5>
				<div class="text-right">
					<button type="submit" id="confirmYesId" class="btn btn-primary"
										  onclick="registerService.deleteCert();">Yes</button>
					<button type="submit" id="confirmNoId" class="btn btn-default"
								 data-dismiss="modal">No</button>	
				</div>
			</div>
		</div>
	</div>
</div>




